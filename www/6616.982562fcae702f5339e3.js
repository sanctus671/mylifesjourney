(self.webpackChunkmy_lifes_journey=self.webpackChunkmy_lifes_journey||[]).push([[6616],{6616:function(n,t,e){"use strict";e.r(t),e.d(t,{EditProfilePageModule:function(){return P}});var o=e(1116),i=e(1462),r=e(8809),g=e(5860),a=e(9609),p=e(529),_=e(5803),c=e(303),u=e(5700),s=e(1585),f=e(8885);function l(n,t){1&n&&_._UZ(0,"ion-icon",17)}function d(n,t){if(1&n&&(_.TgZ(0,"ion-avatar",18),_._UZ(1,"img",19),_.qZA()),2&n){var e=_.oxw();_.xp6(1),_.Q6J("src",e.profile.avatar,_.LSH)}}function m(n,t){1&n&&_._UZ(0,"ion-spinner",20)}function h(n,t){if(1&n&&(_.TgZ(0,"p",21),_._uU(1),_.qZA()),2&n){var e=_.oxw();_.xp6(1),_.Oqu(e.profile.error)}}var M=[{path:"",component:function(){function n(n,t,e,o,i,r,g){var a=this;this.navController=n,this.authService=t,this.transfer=e,this.camera=o,this.loadingController=i,this.alertController=r,this.profileService=g,this.profile={loading:!1},this.authService.getUserData().subscribe(function(n){a.profile=n.profile,a.profile.email=n.email,a.profile.dob_raw=a.profile.dob})}return n.prototype.ngOnInit=function(){},n.prototype.update=function(){var n=this;this.profile.loading=!0,this.profile.dob_raw&&(this.profile.dob=a(this.profile.dob_raw).format("YYYY-MM-DD")),this.profileService.updateProfile(this.profile).then(function(){n.authService.retreiveUserData().then(function(){})}),this.navController.back()},n.prototype.changeImage=function(){var n=this;this.camera.getPicture({sourceType:this.camera.PictureSourceType.PHOTOLIBRARY,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,quality:25}).then(function(t){var e;n.loadingController.create({message:"Your image is being uploaded. Please wait...",duration:2e4}).then(function(n){e=n,n.present()});var o=n.transfer.create(),i={fileKey:"media_file",fileName:Math.random().toString(36).substring(2),params:{},mimeType:"image/jpeg"};o.upload(t,encodeURI(p.N.apiUrl+"/upload"),i).then(function(t){if(t.response){var o=JSON.parse(t.response);n.profile.avatar=o.file}e.dismiss()},function(t){n.alertController.create({header:"Error",subHeader:"There was a problem uploading your image",message:JSON.stringify(t),buttons:[{text:"Dismiss",role:"cancel"}]}).then(function(n){n.present()}),e.dismiss()})},function(n){})},n.\u0275fac=function(t){return new(t||n)(_.Y36(r.SH),_.Y36(c.$),_.Y36(u.K),_.Y36(s.V1),_.Y36(r.HT),_.Y36(r.Br),_.Y36(f.H))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-edit-profile"]],decls:34,vars:9,consts:[["color","primary"],["slot","start"],["defaultHref","/"],[1,"signup"],[1,"signup__form",3,"ngSubmit"],["lines","none",1,"edit-profile__form__avatar"],["name","person",4,"ngIf"],["item-start","",4,"ngIf"],["color","primary","shape","round",3,"click"],[1,"signup__form__input"],["type","text","name","name",3,"ngModel","ngModelChange"],["type","email","name","email",3,"ngModel","ngModelChange"],["displayFormat","DD/MM/YYYY","name","dob",3,"ngModel","ngModelChange"],["name","biography","autoGrow","true",3,"ngModel","ngModelChange"],["color","dark","expand","block","shape","round","type","submit",1,"signup__form__login-button",3,"disabled"],["color","light",4,"ngIf"],["class","signup__form__error",4,"ngIf"],["name","person"],["item-start",""],[3,"src"],["color","light"],[1,"signup__form__error"]],template:function(n,t){1&n&&(_.TgZ(0,"ion-header"),_.TgZ(1,"ion-toolbar",0),_.TgZ(2,"ion-buttons",1),_.TgZ(3,"ion-button"),_._UZ(4,"ion-back-button",2),_.qZA(),_.qZA(),_.TgZ(5,"ion-title"),_._uU(6,"Edit Profile"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(7,"ion-content",3),_.TgZ(8,"form",4),_.NdJ("ngSubmit",function(){return t.update()}),_.TgZ(9,"ion-item",5),_.YNc(10,l,1,0,"ion-icon",6),_.YNc(11,d,2,1,"ion-avatar",7),_.TgZ(12,"ion-button",8),_.NdJ("click",function(){return t.changeImage()}),_._uU(13,"Select Photo"),_.qZA(),_.qZA(),_.TgZ(14,"div",9),_.TgZ(15,"h6"),_._uU(16,"Name"),_.qZA(),_.TgZ(17,"ion-input",10),_.NdJ("ngModelChange",function(n){return t.profile.name=n}),_.qZA(),_.qZA(),_.TgZ(18,"div",9),_.TgZ(19,"h6"),_._uU(20,"Email"),_.qZA(),_.TgZ(21,"ion-input",11),_.NdJ("ngModelChange",function(n){return t.profile.email=n}),_.qZA(),_.qZA(),_.TgZ(22,"div",9),_.TgZ(23,"h6"),_._uU(24,"Date of Birth"),_.qZA(),_.TgZ(25,"ion-datetime",12),_.NdJ("ngModelChange",function(n){return t.profile.dob_raw=n}),_.qZA(),_.qZA(),_.TgZ(26,"div",9),_.TgZ(27,"h6"),_._uU(28,"Biography"),_.qZA(),_.TgZ(29,"ion-textarea",13),_.NdJ("ngModelChange",function(n){return t.profile.biography=n}),_.qZA(),_.qZA(),_.TgZ(30,"ion-button",14),_._uU(31," Update "),_.YNc(32,m,1,0,"ion-spinner",15),_.qZA(),_.YNc(33,h,2,1,"p",16),_.qZA(),_.qZA()),2&n&&(_.xp6(10),_.Q6J("ngIf",!t.profile.avatar),_.xp6(1),_.Q6J("ngIf",t.profile.avatar),_.xp6(6),_.Q6J("ngModel",t.profile.name),_.xp6(4),_.Q6J("ngModel",t.profile.email),_.xp6(4),_.Q6J("ngModel",t.profile.dob_raw),_.xp6(4),_.Q6J("ngModel",t.profile.biography),_.xp6(1),_.Q6J("disabled",t.profile.loading),_.xp6(2),_.Q6J("ngIf",t.profile.loading),_.xp6(1),_.Q6J("ngIf",t.profile.error))},directives:[r.Gu,r.sr,r.Sm,r.YG,r.oU,r.cs,r.wd,r.W2,i._Y,i.JL,i.F,r.Ie,o.O5,r.pK,r.j9,i.JJ,i.On,r.x4,r.QI,r.g2,r.gu,r.BJ,r.PQ],styles:[".edit-profile__form__avatar[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px}.edit-profile__form__avatar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:20px;height:20px;padding:10px;border-radius:20px;background-color:#210f38;color:#fff;margin-bottom:5px}.edit-profile__form__avatar[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{margin-bottom:5px}.edit-profile__form__avatar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-left:15px}.signup[_ngcontent-%COMP%]{--padding-top:30px;--padding-bottom:40px;--padding-start:20px;--padding-end:20px}.signup[_ngcontent-%COMP%]   .signup__header[_ngcontent-%COMP%]{padding-bottom:30px}.signup[_ngcontent-%COMP%]   .signup__header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;width:180px}.signup[_ngcontent-%COMP%]   .signup__header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:40px 0 0}.signup[_ngcontent-%COMP%]   .signup__header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:10px 0 0}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__input[_ngcontent-%COMP%]{margin-top:20px}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__input[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:200;font-size:13px;letter-spacing:1px;margin:0;padding-bottom:10px}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__input[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%], .signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], .signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__input[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--background:#e7d2e6;background-color:#e7d2e6;border-radius:64px;--padding-top:12.5px;--padding-bottom:12.5px;--padding-start:30px}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__login-button[_ngcontent-%COMP%]{margin-top:25px}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__login-button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;margin-left:5px}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__error[_ngcontent-%COMP%]{text-align:center;color:red}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__secondary-actions[_ngcontent-%COMP%]{margin-top:25px}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__secondary-actions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px;font-weight:200;text-align:center}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__secondary-actions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#210f38}"]}),n}()}],C=function(){function n(){}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[[g.Bz.forChild(M)],g.Bz]}),n}(),P=function(){function n(){}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[[o.ez,i.u5,r.Pc,C]]}),n}()}}]);