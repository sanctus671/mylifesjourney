(self.webpackChunkmy_lifes_journey=self.webpackChunkmy_lifes_journey||[]).push([[4596],{4596:function(e,n,t){"use strict";t.r(n),t.d(n,{FamilyTreePageModule:function(){return J}});var i=t(1116),r=t(1462),o=t(8809),l=t(5860),a=t(5803),c=t(303),_=t(529),g=t(2693),f=t(6578),m=function(){function e(e,n){this.http=e,this.storage=n}return e.prototype.getFamilyMembers=function(e){var n=this;return new Promise(function(t,i){n.storage.get("mlj_token").then(function(r){r?n.http.get(_.N.apiUrl+"/familytrees?profile_id="+e+"&token="+r).subscribe(function(e){t(e)},function(e){i(e)}):i()})})},e.prototype.updateFamilyMembers=function(e,n){var t=this;return new Promise(function(i,r){t.storage.get("mlj_token").then(function(o){o?t.http.put(_.N.apiUrl+"/familytrees/"+e+"?token="+o,{tree:n}).subscribe(function(e){i(e)},function(e){r(e)}):r(!1)})})},e.\u0275fac=function(n){return new(n||e)(a.LFG(g.eN),a.LFG(f.K))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function p(e,n){1&e&&(a.TgZ(0,"div",9),a._UZ(1,"ion-spinner",10),a.qZA())}function d(e,n){if(1&e){var t=a.EpF();a.TgZ(0,"div",14),a.TgZ(1,"div",15),a.NdJ("click",function(){var e=a.CHM(t).index,n=a.oxw().$implicit;return a.oxw(2).editFamilyMember({children:[{people:n.people}]},0,e,1)}),a.qZA(),a.TgZ(2,"h6"),a._uU(3),a.qZA(),a.qZA()}if(2&e){var i=n.$implicit;a.xp6(3),a.Oqu(i)}}function u(e,n){if(1&e){var t=a.EpF();a.TgZ(0,"div",14),a.TgZ(1,"div",15),a.NdJ("click",function(){var e=a.CHM(t).index,n=a.oxw().index,i=a.oxw().$implicit;return a.oxw(2).editFamilyMember(i,n,e,2)}),a.qZA(),a.TgZ(2,"h6"),a._uU(3),a.qZA(),a.qZA()}if(2&e){var i=n.$implicit;a.xp6(3),a.Oqu(i)}}function s(e,n){if(1&e){var t=a.EpF();a.TgZ(0,"a",20),a.NdJ("click",function(){a.CHM(t);var e=a.oxw(2).$implicit;return a.oxw(4).addFamilyMemberChild(e.children)}),a._UZ(1,"ion-icon",18),a.qZA()}}function M(e,n){if(1&e){var t=a.EpF();a.TgZ(0,"div",14),a.TgZ(1,"div",15),a.NdJ("click",function(){var e=a.CHM(t).index,n=a.oxw().index,i=a.oxw().$implicit;return a.oxw(3).editFamilyMember(i,n,e,3)}),a.qZA(),a.TgZ(2,"h6"),a._uU(3),a.qZA(),a.TgZ(4,"a",17),a.NdJ("click",function(){a.CHM(t);var e=a.oxw().index,n=a.oxw().$implicit;return a.oxw(3).addFamilyMember(n.children,e)}),a._UZ(5,"ion-icon",18),a.qZA(),a.YNc(6,s,2,0,"a",19),a.qZA()}if(2&e){var i=n.$implicit,r=a.oxw().$implicit;a.xp6(3),a.Oqu(i),a.xp6(3),a.Q6J("ngIf",r.children.length<1)}}function y(e,n){if(1&e){var t=a.EpF();a.TgZ(0,"a",20),a.NdJ("click",function(){a.CHM(t);var e=a.oxw(2).$implicit;return a.oxw(6).addFamilyMemberChild(e.children)}),a._UZ(1,"ion-icon",18),a.qZA()}}function C(e,n){if(1&e){var t=a.EpF();a.TgZ(0,"div",14),a.TgZ(1,"div",15),a.NdJ("click",function(){var e=a.CHM(t).index,n=a.oxw().index,i=a.oxw(2).$implicit;return a.oxw(4).editFamilyMember(i,n,e,4)}),a.qZA(),a.TgZ(2,"h6"),a._uU(3),a.qZA(),a.TgZ(4,"a",17),a.NdJ("click",function(){a.CHM(t);var e=a.oxw().index,n=a.oxw(2).$implicit;return a.oxw(4).addFamilyMember(n.children,e)}),a._UZ(5,"ion-icon",18),a.qZA(),a.YNc(6,y,2,0,"a",19),a.qZA()}if(2&e){var i=n.$implicit,r=a.oxw().$implicit;a.xp6(3),a.Oqu(i),a.xp6(3),a.Q6J("ngIf",r.children.length<1)}}function O(e,n){if(1&e){var t=a.EpF();a.TgZ(0,"div",14),a.TgZ(1,"div",15),a.NdJ("click",function(){var e=a.CHM(t).index,n=a.oxw().index,i=a.oxw(2).$implicit;return a.oxw(6).editFamilyMember(i,n,e,5)}),a.qZA(),a.TgZ(2,"h6"),a._uU(3),a.qZA(),a.TgZ(4,"a",17),a.NdJ("click",function(){a.CHM(t);var e=a.oxw().index,n=a.oxw(2).$implicit;return a.oxw(6).addFamilyMember(n.children,e)}),a._UZ(5,"ion-icon",18),a.qZA(),a.TgZ(6,"a",20),a.NdJ("click",function(){a.CHM(t);var e=a.oxw().$implicit;return a.oxw(8).addFamilyMemberChild(e.children)}),a._UZ(7,"ion-icon",18),a.qZA(),a.qZA()}if(2&e){var i=n.$implicit;a.xp6(3),a.Oqu(i)}}function h(e,n){if(1&e){var t=a.EpF();a.TgZ(0,"div",14),a.TgZ(1,"div",15),a.NdJ("click",function(){var e=a.CHM(t).index,n=a.oxw().index,i=a.oxw(2).$implicit;return a.oxw(8).editFamilyMember(i,n,e,6)}),a.qZA(),a.TgZ(2,"h6"),a._uU(3),a.qZA(),a.TgZ(4,"a",17),a.NdJ("click",function(){a.CHM(t);var e=a.oxw().index,n=a.oxw(2).$implicit;return a.oxw(8).addFamilyMember(n.children,e)}),a._UZ(5,"ion-icon",18),a.qZA(),a.qZA()}if(2&e){var i=n.$implicit;a.xp6(3),a.Oqu(i)}}function x(e,n){if(1&e&&(a.TgZ(0,"li"),a.YNc(1,h,6,1,"div",13),a.qZA()),2&e){var t=n.$implicit;a.xp6(1),a.Q6J("ngForOf",t.people)}}function P(e,n){if(1&e&&(a.TgZ(0,"ul"),a.YNc(1,x,2,1,"li",12),a.qZA()),2&e){var t=a.oxw().$implicit;a.xp6(1),a.Q6J("ngForOf",t.children)}}function Z(e,n){if(1&e&&(a.TgZ(0,"li"),a.YNc(1,O,8,1,"div",13),a.YNc(2,P,2,1,"ul",16),a.qZA()),2&e){var t=n.$implicit;a.xp6(1),a.Q6J("ngForOf",t.people),a.xp6(1),a.Q6J("ngIf",t.children.length>0)}}function v(e,n){if(1&e&&(a.TgZ(0,"ul"),a.YNc(1,Z,3,2,"li",12),a.qZA()),2&e){var t=a.oxw().$implicit;a.xp6(1),a.Q6J("ngForOf",t.children)}}function b(e,n){if(1&e&&(a.TgZ(0,"li"),a.YNc(1,C,7,2,"div",13),a.YNc(2,v,2,1,"ul",16),a.qZA()),2&e){var t=n.$implicit;a.xp6(1),a.Q6J("ngForOf",t.people),a.xp6(1),a.Q6J("ngIf",t.children.length>0)}}function w(e,n){if(1&e&&(a.TgZ(0,"ul"),a.YNc(1,b,3,2,"li",12),a.qZA()),2&e){var t=a.oxw().$implicit;a.xp6(1),a.Q6J("ngForOf",t.children)}}function F(e,n){if(1&e&&(a.TgZ(0,"li"),a.YNc(1,M,7,2,"div",13),a.YNc(2,w,2,1,"ul",16),a.qZA()),2&e){var t=n.$implicit;a.xp6(1),a.Q6J("ngForOf",t.people),a.xp6(1),a.Q6J("ngIf",t.children.length>0)}}function q(e,n){if(1&e&&(a.TgZ(0,"li"),a.YNc(1,u,4,1,"div",13),a.TgZ(2,"ul"),a.YNc(3,F,3,2,"li",12),a.qZA(),a.qZA()),2&e){var t=n.$implicit;a.xp6(1),a.Q6J("ngForOf",t.people),a.xp6(2),a.Q6J("ngForOf",t.children)}}function A(e,n){if(1&e&&(a.TgZ(0,"li"),a.YNc(1,d,4,1,"div",13),a.TgZ(2,"ul"),a.YNc(3,q,4,2,"li",12),a.qZA(),a.qZA()),2&e){var t=n.$implicit;a.xp6(1),a.Q6J("ngForOf",t.people),a.xp6(2),a.Q6J("ngForOf",t.children)}}function T(e,n){if(1&e&&(a.TgZ(0,"ul",11),a.YNc(1,A,4,2,"li",12),a.qZA()),2&e){var t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.familyMembers)}}var N=[{path:"",component:function(){function e(e,n,t){var i=this;this.alertCtrl=e,this.authService=n,this.familyMemberService=t,this.loading=!0,this.authService.getUserData().subscribe(function(e){i.user=e,i.getFamilyMembers()}),this.familyMembers=[{people:["Grandma","Granddad","Grandma","Granddad"],children:[{people:["Mother","Father"],children:[{people:["Me"],children:[]}]}]}]}return e.prototype.ngOnInit=function(){},e.prototype.addFamilyMember=function(e,n){var t=this;this.alertCtrl.create({header:"Add Family Member",inputs:[{name:"name",placeholder:"Name",type:"text"}],buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Add",handler:function(i){var r=parseInt(n)+1;e.splice(r,0,{people:[i.name],children:[]}),t.saveFamilyMembers()}}]}).then(function(e){e.present()})},e.prototype.addFamilyMemberChild=function(e){var n=this;this.alertCtrl.create({header:"Add Family Member",inputs:[{name:"name",placeholder:"Name",type:"text"}],buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Add",handler:function(t){e.push({people:[t.name],children:[]}),n.saveFamilyMembers()}}]}).then(function(e){e.present()})},e.prototype.editFamilyMember=function(e,n,t,i){var r=this,o=e.children[n].people;this.alertCtrl.create({header:"Edit Family Member",inputs:[{name:"name",placeholder:"Name",type:"text",value:o[t]}],buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Update",handler:function(l){if(!l.name&&i>2)return o.splice(t,1),o.length<1&&e.children.splice(n,1),3===i&&e.children.length<1&&e.children.push({people:["Me"],children:[]}),void r.saveFamilyMembers();!l.name&&i<3||(o[t]=l.name,r.saveFamilyMembers())}}]}).then(function(e){e.present()})},e.prototype.getFamilyMembers=function(){var e=this;this.familyMemberService.getFamilyMembers(this.user.profile.id).then(function(n){n&&n.tree&&(e.familyMembers=JSON.parse(n.tree)),e.loading=!1}).catch(function(){e.loading=!1})},e.prototype.saveFamilyMembers=function(){var e=JSON.stringify(this.familyMembers);this.familyMemberService.updateFamilyMembers(this.user.profile.id,e).then(function(){})},e.\u0275fac=function(n){return new(n||e)(a.Y36(o.Br),a.Y36(c.$),a.Y36(m))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-family-tree"]],decls:16,vars:2,consts:[[1,"app-navigation","ion-no-border"],["slot","end"],["name","menu"],[1,"ion-text-left"],["src","assets/img/logo-dark.svg",1,"app-navigation__logo"],[1,"family-tree"],[1,"family-tree__header"],["class","family-tree__loading",4,"ngIf"],["class","family-tree__tree",4,"ngIf"],[1,"family-tree__loading"],["color","primary"],[1,"family-tree__tree"],[4,"ngFor","ngForOf"],["class","family-tree__tree__person",4,"ngFor","ngForOf"],[1,"family-tree__tree__person"],[1,"family-tree__tree__person__image",3,"click"],[4,"ngIf"],[1,"family-tree__tree__person__add",3,"click"],["name","add"],["class","family-tree__tree__person__add family-tree__tree__person__add--bottom",3,"click",4,"ngIf"],[1,"family-tree__tree__person__add","family-tree__tree__person__add--bottom",3,"click"]],template:function(e,n){1&e&&(a.TgZ(0,"ion-header",0),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-buttons",1),a.TgZ(3,"ion-menu-button"),a._UZ(4,"ion-icon",2),a._uU(5," Menu "),a.qZA(),a.qZA(),a.TgZ(6,"ion-title",3),a._UZ(7,"img",4),a.qZA(),a.qZA(),a.qZA(),a.TgZ(8,"ion-content",5),a.TgZ(9,"div",6),a.TgZ(10,"h2"),a._uU(11,"Family Tree"),a.qZA(),a.TgZ(12,"p"),a._uU(13,"Your timeline orders your memories during your life"),a.qZA(),a.qZA(),a.YNc(14,p,2,0,"div",7),a.YNc(15,T,2,1,"ul",8),a.qZA()),2&e&&(a.xp6(14),a.Q6J("ngIf",n.loading),a.xp6(1),a.Q6J("ngIf",!n.loading))},directives:[o.Gu,o.sr,o.Sm,o.fG,o.gu,o.wd,o.W2,i.O5,o.PQ,i.sg],styles:['.app-navigation[_ngcontent-%COMP%]{padding-left:15px;padding-right:20px;background-color:#fff}.app-navigation[_ngcontent-%COMP%]   ion-menu-button[_ngcontent-%COMP%]{width:auto;font-size:13px;text-transform:uppercase;font-weight:300;color:#210f36}.app-navigation[_ngcontent-%COMP%]   ion-menu-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;margin-right:3px}.app-navigation[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{padding-inline-start:0;padding-inline-end:0}.app-navigation[_ngcontent-%COMP%]   .app-navigation__logo[_ngcontent-%COMP%]{width:140px;margin-top:10px}.family-tree[_ngcontent-%COMP%]   .family-tree__header[_ngcontent-%COMP%]{padding:20px 30px;margin-bottom:20px}.family-tree[_ngcontent-%COMP%]   .family-tree__header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;margin:0}.family-tree[_ngcontent-%COMP%]   .family-tree__header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;opacity:.7}.family-tree[_ngcontent-%COMP%]   .family-tree__loading[_ngcontent-%COMP%]{text-align:center;margin-top:30px;margin-bottom:30px}.family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .family-tree[_ngcontent-%COMP%]   .tree[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;position:relative}.family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%]{margin:0 0 1em;text-align:center;padding:0 30px;overflow-x:scroll}.family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .family-tree[_ngcontent-%COMP%]   .tree[_ngcontent-%COMP%]{display:table}.family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:100%}.family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:table-cell;padding:.5em 0;vertical-align:top}.family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{outline:1px solid #e7d2e6;content:"";left:0;position:absolute;right:0;top:0}.family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child:before{left:50%}.family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child:before{right:50%}.family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%]   .family-tree__tree__person[_ngcontent-%COMP%], .family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:.1em solid #0000;border-radius:.2em;display:inline-block;margin:0 .2em .5em;padding:.2em .5em;position:relative}.family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%]   .family-tree__tree__person[_ngcontent-%COMP%]:before, .family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before, .family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]:before{outline:1px solid #e7d2e6;content:"";height:.5em;left:50%;position:absolute}.family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]:before{top:-.5em}.family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%]   .family-tree__tree__person[_ngcontent-%COMP%]:before, .family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{top:-.55em}.family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{margin-top:0}.family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:after, .family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:before, .family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .family-tree__tree__person[_ngcontent-%COMP%]:before, .family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:before, .family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]:before, .family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .family-tree__tree__person[_ngcontent-%COMP%]:before, .family-tree[_ngcontent-%COMP%]   .family-tree__tree[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:before{outline:none}.family-tree[_ngcontent-%COMP%]   .family-tree__tree__person[_ngcontent-%COMP%]{text-align:Center;display:inline-block;position:relative}.family-tree[_ngcontent-%COMP%]   .family-tree__tree__person[_ngcontent-%COMP%]   .family-tree__tree__person__image[_ngcontent-%COMP%]{display:block;width:45px;height:45px;border-radius:22.5px;background-size:contain;background-position:50%;background-color:#000;background-image:url(person-icon.911b045c494c29744d4b.png);margin:0 auto}.family-tree[_ngcontent-%COMP%]   .family-tree__tree__person[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0;display:inline-block;white-space:nowrap;font-size:12px;max-width:65px;overflow:hidden;text-overflow:ellipsis}.family-tree[_ngcontent-%COMP%]   .family-tree__tree__person[_ngcontent-%COMP%]   .family-tree__tree__person__add[_ngcontent-%COMP%]{position:absolute;top:15px;right:-16px;background-color:#e7d2e6;color:#210f38;font-weight:100;font-size:14px;line-height:20px;padding:2px;border-radius:10px;width:20px;height:20px;text-align:center;display:inline-block}.family-tree[_ngcontent-%COMP%]   .family-tree__tree__person[_ngcontent-%COMP%]   .family-tree__tree__person__add.family-tree__tree__person__add--bottom[_ngcontent-%COMP%]{top:auto;bottom:-20px;right:auto;left:calc(50% - 10px)}']}),e}()}],k=function(){function e(){}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[l.Bz.forChild(N)],l.Bz]}),e}(),J=function(){function e(){}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[i.ez,r.u5,o.Pc,k]]}),e}()}}]);