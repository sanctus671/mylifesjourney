(self.webpackChunkmy_lifes_journey=self.webpackChunkmy_lifes_journey||[]).push([[373],{373:function(n,t,e){"use strict";e.r(t),e.d(t,{MemoryPageModule:function(){return v}});var o=e(1116),m=e(1462),i=e(8809),r=e(5860),_=e(9609),c=e(5803),a=e(2592),g=e(303);function d(n,t){if(1&n&&(c.TgZ(0,"audio",19),c._UZ(1,"source",20),c.qZA()),2&n){var e=c.oxw();c.xp6(1),c.Q6J("src",e.memory.audio,c.LSH)}}function p(n,t){if(1&n&&c._UZ(0,"img",25),2&n){var e=c.oxw().$implicit;c.Q6J("src",e.file,c.LSH)}}function s(n,t){if(1&n&&(c.TgZ(0,"audio",19),c._UZ(1,"source",20),c.qZA()),2&n){var e=c.oxw().$implicit;c.xp6(1),c.Q6J("src",e.file,c.LSH)}}function y(n,t){if(1&n&&(c.TgZ(0,"div",23),c.YNc(1,p,1,1,"img",24),c.YNc(2,s,2,1,"audio",5),c.qZA()),2&n){var e=t.$implicit;c.xp6(1),c.Q6J("ngIf","camera"===e.media_type||"photo"===e.media_type),c.xp6(1),c.Q6J("ngIf","audio"===e.media_type)}}function l(n,t){if(1&n&&(c.TgZ(0,"div",21),c.TgZ(1,"h5"),c._uU(2,"Additional Media"),c.qZA(),c.YNc(3,y,3,2,"div",22),c.qZA()),2&n){var e=c.oxw();c.xp6(3),c.Q6J("ngForOf",e.memory.additional_media)}}function u(n,t){if(1&n&&(c.TgZ(0,"div",29),c._uU(1),c.qZA()),2&n){var e=t.$implicit;c.xp6(1),c.hij(" ",e.category.title," ")}}function f(n,t){if(1&n&&(c.TgZ(0,"div",26),c.TgZ(1,"h5"),c._uU(2,"Categories"),c.qZA(),c.TgZ(3,"div",27),c.YNc(4,u,2,1,"div",28),c.qZA(),c.qZA()),2&n){var e=c.oxw();c.xp6(4),c.Q6J("ngForOf",e.memory.categories)}}function M(n,t){if(1&n){var e=c.EpF();c.TgZ(0,"div",30),c._uU(1),c.TgZ(2,"div",31),c._uU(3),c.qZA(),c.TgZ(4,"ion-icon",32),c.NdJ("click",function(){var n=c.CHM(e),t=n.index,o=n.$implicit;return c.oxw().removeComment(t,o.id)}),c.qZA(),c.qZA()}if(2&n){var o=t.$implicit,m=c.oxw();c.xp6(1),c.hij(" ",o.comment," "),c.xp6(2),c.AsE("Added ",m.formatDate(o.created_at)," by ",o.name,"")}}var C=function(n){return{"background-image":n}},x=function(n){return{"memory__header--has-image":n}},O=function(n){return[n]},P=[{path:"",component:function(){function n(n,t,e){var o=this;this.route=n,this.memoryService=t,this.authService=e,this.memory={id:this.route.snapshot.params.id,categories:[],comments:[]},this.comment={memory_id:this.memory.id},this.comments=[],this.authService.getUserData().subscribe(function(n){o.user=n,o.user.profile&&(o.comment.profile_id=o.user.profile.id),o.getMemory()})}return n.prototype.ngOnInit=function(){},n.prototype.getMemory=function(){var n=this;this.memoryService.getMemory(this.memory.id).then(function(t){n.memory=t,n.memory.additional_media=n.memory.additional_media?JSON.parse(n.memory.additional_media):""})},n.prototype.addComment=function(){var n=this;this.comment.name&&this.comment.comment&&!this.comment.loading&&(this.comment.loading=!0,this.memoryService.createMemoryComment(this.comment).then(function(t){n.comment.loading=!1;var e={};Object.assign(e,n.comment),n.memory.comments.push(e),n.comment.name="",n.comment.comment=""}).catch(function(){n.comment.loading=!1}))},n.prototype.removeComment=function(n,t){this.memory.comments.splice(n,1),this.memoryService.deleteMemoryComment(t).then(function(){})},n.prototype.formatDate=function(n){return _(n).format("DD MMMM YYYY")},n.\u0275fac=function(t){return new(t||n)(c.Y36(r.gz),c.Y36(a.S),c.Y36(g.$))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-memory"]],decls:31,vars:20,consts:[[1,"app-navigation","ion-no-border"],["slot","start"],["text","Back","icon","chevron-back-outline",1,"app-navigation__back-button"],[1,"memory"],[1,"memory__header",3,"ngStyle","ngClass"],["controls","",4,"ngIf"],[1,"memory__content"],["routerDirection","forward",1,"memory__content__edit","ion-activatable","ripple-parent",3,"routerLink"],[1,"memory__content__title"],[1,"memory__content__description"],["class","memory__additional-media",4,"ngIf"],["class","memory__categories",4,"ngIf"],[1,"memory__comments"],[1,"memory__comments__list"],["class","memory__comments__list__comment",4,"ngFor","ngForOf"],[1,"memory__comments__add"],["placeholder","Your name","type","text","name","name",3,"ngModel","disabled","ngModelChange"],["placeholder","Write a comment...","autoGrow","true",3,"ngModel","disabled","ngModelChange"],[1,"memory__comments__add__button","ion-activatable","ripple-parent",3,"click"],["controls",""],["type","audio/mpeg",3,"src"],[1,"memory__additional-media"],["class","memory__additional-media__file",4,"ngFor","ngForOf"],[1,"memory__additional-media__file"],[3,"src",4,"ngIf"],[3,"src"],[1,"memory__categories"],[1,"memory__categories__list"],["class","memory__categories__list__category",4,"ngFor","ngForOf"],[1,"memory__categories__list__category"],[1,"memory__comments__list__comment"],[1,"memory__comments__list__comment__date"],["name","remove-circle",3,"click"]],template:function(n,t){1&n&&(c.TgZ(0,"ion-header",0),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",1),c._UZ(3,"ion-back-button",2),c.qZA(),c.qZA(),c.qZA(),c.TgZ(4,"ion-content",3),c.TgZ(5,"div",4),c.YNc(6,d,2,1,"audio",5),c.qZA(),c.TgZ(7,"div",6),c.TgZ(8,"a",7),c._uU(9," Edit "),c._UZ(10,"ion-ripple-effect"),c.qZA(),c.TgZ(11,"div",8),c.TgZ(12,"h2"),c._uU(13),c.qZA(),c.TgZ(14,"h5"),c._uU(15),c.qZA(),c.qZA(),c.TgZ(16,"div",9),c._uU(17),c.qZA(),c.qZA(),c.YNc(18,l,4,1,"div",10),c.YNc(19,f,5,1,"div",11),c.TgZ(20,"div",12),c.TgZ(21,"h5"),c._uU(22,"Comments"),c.qZA(),c.TgZ(23,"div",13),c.YNc(24,M,5,3,"div",14),c.qZA(),c.TgZ(25,"div",15),c.TgZ(26,"ion-input",16),c.NdJ("ngModelChange",function(n){return t.comment.name=n}),c.qZA(),c.TgZ(27,"ion-textarea",17),c.NdJ("ngModelChange",function(n){return t.comment.comment=n}),c.qZA(),c.TgZ(28,"a",18),c.NdJ("click",function(){return t.addComment()}),c._uU(29," Add "),c._UZ(30,"ion-ripple-effect"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&n&&(c.xp6(5),c.Q6J("ngStyle",c.VKq(14,C,"url("+t.memory.image+")"))("ngClass",c.VKq(16,x,t.memory.image)),c.xp6(1),c.Q6J("ngIf",t.memory.audio),c.xp6(2),c.Q6J("routerLink",c.VKq(18,O,"/edit-memory/"+t.memory.id)),c.xp6(5),c.Oqu(t.memory.title),c.xp6(2),c.Oqu(t.formatDate(t.memory.memory_date)),c.xp6(2),c.hij(" ",t.memory.description," "),c.xp6(1),c.Q6J("ngIf",t.memory.additional_media&&t.memory.additional_media.length>0),c.xp6(1),c.Q6J("ngIf",t.memory.categories&&t.memory.categories.length>0),c.xp6(5),c.Q6J("ngForOf",t.memory.comments),c.xp6(2),c.Q6J("ngModel",t.comment.name)("disabled",t.comment.loading),c.xp6(1),c.Q6J("ngModel",t.comment.comment)("disabled",t.comment.loading))},directives:[i.Gu,i.sr,i.Sm,i.oU,i.cs,i.W2,o.PC,o.mk,o.O5,r.yS,i.YI,i.H$,o.sg,i.pK,i.j9,m.JJ,m.On,i.g2,i.gu],styles:[".app-navigation[_ngcontent-%COMP%]{padding-left:15px;padding-right:20px;background-color:initial}.app-navigation[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:#0000}.app-navigation[_ngcontent-%COMP%]   .app-navigation__back-button[_ngcontent-%COMP%]{font-size:13px;text-transform:none;background-color:#fff;border-radius:20px;overflow:hidden;--min-width:72px;color:#210f38;--icon-font-size:15px}.app-navigation[_ngcontent-%COMP%]   .app-navigation__back-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#e7d2e6}.app-navigation[_ngcontent-%COMP%]   .app-navigation__back-button.ios[_ngcontent-%COMP%]{--icon-margin-end:0px}.memory[_ngcontent-%COMP%]{position:absolute;top:0}.memory[_ngcontent-%COMP%]   .memory__header[_ngcontent-%COMP%]{background-size:cover;background-position:50%;background-color:#e7d2e6;text-align:center;padding-top:90px;padding-bottom:70px}.memory[_ngcontent-%COMP%]   .memory__header.memory__header--has-image[_ngcontent-%COMP%]{height:350px}.memory[_ngcontent-%COMP%]   .memory__content[_ngcontent-%COMP%]{position:relative;background-color:#fff;border-top-right-radius:20px;border-top-left-radius:20px;transform:translateY(-30px);padding:30px 30px 0}.memory[_ngcontent-%COMP%]   .memory__content[_ngcontent-%COMP%]   .memory__content__edit[_ngcontent-%COMP%]{padding:8px 20px;background-color:#e7d2e6;color:#210f38;font-size:13px;line-height:16px;border-radius:20px;position:absolute;right:30px;top:35px;overflow:hidden;text-decoration:none}.memory[_ngcontent-%COMP%]   .memory__content[_ngcontent-%COMP%]   .memory__content__title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.memory[_ngcontent-%COMP%]   .memory__content[_ngcontent-%COMP%]   .memory__content__title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:13px;text-transform:uppercase;font-weight:300;white-space:nowrap;letter-spacing:1px;margin:5px 0 0}.memory[_ngcontent-%COMP%]   .memory__content[_ngcontent-%COMP%]   .memory__content__description[_ngcontent-%COMP%]{font-size:22px;line-height:28px;margin-top:40px}.memory[_ngcontent-%COMP%]   .memory__content[_ngcontent-%COMP%]   .memory__content__description[_ngcontent-%COMP%]   .memory__content__description__image[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:10px}.memory[_ngcontent-%COMP%]   .memory__content[_ngcontent-%COMP%]   .memory__content__description[_ngcontent-%COMP%]   .memory__content__description__image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0;width:100%}.memory[_ngcontent-%COMP%]   .memory__content[_ngcontent-%COMP%]   .memory__content__description[_ngcontent-%COMP%]   .memory__content__description__image[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;line-height:16px;text-transform:uppercase;font-weight:300;margin:0;letter-spacing:1px}.memory[_ngcontent-%COMP%]   .memory__categories[_ngcontent-%COMP%]{padding:0 30px;margin-top:15px}.memory[_ngcontent-%COMP%]   .memory__categories[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:13px;text-transform:uppercase;border-bottom:1px solid #e7d2e6;margin-bottom:5px}.memory[_ngcontent-%COMP%]   .memory__categories[_ngcontent-%COMP%]   .memory__categories__list[_ngcontent-%COMP%]   .memory__categories__list__category[_ngcontent-%COMP%]{background-color:#210f38;color:#fff;border-radius:25px;margin-right:10px;display:inline-block;font-size:16px;line-height:22px;padding:8px 25px;margin-top:10px}.memory[_ngcontent-%COMP%]   .memory__categories[_ngcontent-%COMP%]   .memory__categories__list[_ngcontent-%COMP%]   .memory__categories__list__category.memory__categories__list__category--active[_ngcontent-%COMP%]{background-color:#e7d2e6}.memory[_ngcontent-%COMP%]   .memory__additional-media[_ngcontent-%COMP%]{padding:0 30px;margin-top:15px}.memory[_ngcontent-%COMP%]   .memory__additional-media[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:13px;text-transform:uppercase;border-bottom:1px solid #e7d2e6;margin-bottom:5px}.memory[_ngcontent-%COMP%]   .memory__additional-media[_ngcontent-%COMP%]   .memory__additional-media__file[_ngcontent-%COMP%]{margin-top:10px;position:relative;display:inline-block;margin-right:15px}.memory[_ngcontent-%COMP%]   .memory__additional-media[_ngcontent-%COMP%]   .memory__additional-media__file[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px}.memory[_ngcontent-%COMP%]   .memory__comments[_ngcontent-%COMP%]{padding:0 30px;margin-top:30px;margin-bottom:80px}.memory[_ngcontent-%COMP%]   .memory__comments[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:13px;text-transform:uppercase;border-bottom:1px solid #e7d2e6;margin-bottom:5px}.memory[_ngcontent-%COMP%]   .memory__comments[_ngcontent-%COMP%]   .memory__comments__list[_ngcontent-%COMP%]{margin-top:20px}.memory[_ngcontent-%COMP%]   .memory__comments[_ngcontent-%COMP%]   .memory__comments__list[_ngcontent-%COMP%]   .memory__comments__list__comment[_ngcontent-%COMP%]{margin-top:10px;padding-bottom:10px;border-bottom:1px solid #e7d2e6;position:relative}.memory[_ngcontent-%COMP%]   .memory__comments[_ngcontent-%COMP%]   .memory__comments__list[_ngcontent-%COMP%]   .memory__comments__list__comment[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#e7d2e6;font-size:24px;position:absolute;right:0;top:0}.memory[_ngcontent-%COMP%]   .memory__comments[_ngcontent-%COMP%]   .memory__comments__list[_ngcontent-%COMP%]   .memory__comments__list__comment[_ngcontent-%COMP%]   .memory__comments__list__comment__date[_ngcontent-%COMP%]{font-size:11px;text-transform:uppercase;letter-spacing:1px;opacity:.5;margin-top:5px}.memory[_ngcontent-%COMP%]   .memory__comments[_ngcontent-%COMP%]   .memory__comments__add[_ngcontent-%COMP%]{margin-top:15px;position:relative}.memory[_ngcontent-%COMP%]   .memory__comments[_ngcontent-%COMP%]   .memory__comments__add[_ngcontent-%COMP%]   .memory__comments__add__button[_ngcontent-%COMP%]{padding:8px 20px;background-color:#e7d2e6;color:#210f38;font-size:13px;line-height:16px;border-radius:20px;position:relative;overflow:hidden;display:inline-block}"]}),n}()}],h=function(){function n(){}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[r.Bz.forChild(P)],r.Bz]}),n}(),v=function(){function n(){}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[o.ez,m.u5,i.Pc,h]]}),n}()}}]);