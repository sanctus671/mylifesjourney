(self.webpackChunkmy_lifes_journey=self.webpackChunkmy_lifes_journey||[]).push([[6616],{6616:function(n,t,o){"use strict";o.r(t),o.d(t,{EditProfilePageModule:function(){return x}});var e=o(1116),i=o(1462),r=o(8809),a=o(8080),g=o(9609),p=o(529),_=o(2620),c=o(5803),s=o(303),u=o(5700),d=o(1585),l=o(8885),f=o(2693);function m(n,t){1&n&&c._UZ(0,"ion-icon",26)}function M(n,t){if(1&n&&(c.TgZ(0,"ion-avatar",27),c._UZ(1,"img",28),c.qZA()),2&n){var o=c.oxw();c.xp6(1),c.Q6J("src",o.profile.avatar,c.LSH)}}function h(n,t){1&n&&c._UZ(0,"ion-spinner",29)}function C(n,t){if(1&n&&(c.TgZ(0,"p",30),c._uU(1),c.qZA()),2&n){var o=c.oxw();c.xp6(1),c.Oqu(o.profile.error)}}var P=function(){return["/settings"]},O=[{path:"",component:function(){function n(n,t,o,e,i,r,a,p,c){var s=this;this.navController=n,this.authService=t,this.transfer=o,this.camera=e,this.loadingController=i,this.alertController=r,this.profileService=a,this.platform=p,this.http=c,this.profile={loading:!1},this.authService.getUserData().subscribe(function(n){s.profile=n.profile,s.profile.email=n.email,s.profile.dob_raw={isRange:!1,singleDate:{jsDate:g(s.profile.dob).toDate()},dateRange:null}}),this.dateOptions={defaultView:_.z6.Year,dateFormat:"dd/mm/yyyy"}}return n.prototype.ngOnInit=function(){},n.prototype.update=function(){var n=this;this.profile.loading=!0,this.profile.dob_raw&&this.profile.dob_raw.singleDate&&this.profile.dob_raw.singleDate.jsDate&&(this.profile.dob=g(this.profile.dob_raw.singleDate.jsDate).format("YYYY-MM-DD")),this.profileService.updateProfile(this.profile).then(function(){n.authService.retreiveUserData().then(function(){})}),this.navController.back()},n.prototype.changeImage=function(){var n=this;this.platform.is("cordova")?this.camera.getPicture({sourceType:this.camera.PictureSourceType.PHOTOLIBRARY,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,quality:25}).then(function(t){var o;n.loadingController.create({message:"Your image is being uploaded. Please wait...",duration:2e4}).then(function(n){o=n,n.present()});var e=n.transfer.create(),i={fileKey:"media_file",fileName:Math.random().toString(36).substring(2),params:{},mimeType:"image/jpeg"};e.upload(t,encodeURI(p.N.apiUrl+"/upload"),i).then(function(t){if(t.response){var e=JSON.parse(t.response);n.profile.avatar=e.file}o.dismiss()},function(t){n.alertController.create({header:"Error",subHeader:"There was a problem uploading your image",message:JSON.stringify(t),buttons:[{text:"Dismiss",role:"cancel"}]}).then(function(n){n.present()}),o.dismiss()})},function(n){}):document.getElementById("addPhotoMedia").click()},n.prototype.uploadPhoto=function(n){var t=this;this.uploadFile(n.target.files[0]).then(function(n){t.profile.avatar=n}).catch(function(){})},n.prototype.uploadFile=function(n){var t=this;return new Promise(function(o,e){t.loadingController.create({message:"Your file is being uploaded. Please wait...",duration:2e4}).then(function(n){t.loadingObj=n,n.present()});var i=new FormData,r=Math.random().toString(36).substring(2);i.append("media_file",n,r),t.http.post(p.N.apiUrl+"/upload",i).toPromise().then(function(n){t.loadingObj&&t.loadingObj.dismiss(),n.file?o(n.file):e(!1)}).catch(function(n){t.alertController.create({header:"Error",subHeader:"There was a problem uploading your file",message:JSON.stringify(n),buttons:[{text:"Dismiss",role:"cancel"}]}).then(function(n){n.present()}),t.loadingObj&&t.loadingObj.dismiss(),e(!1)})})},n.\u0275fac=function(t){return new(t||n)(c.Y36(r.SH),c.Y36(s.$),c.Y36(u.K),c.Y36(d.V1),c.Y36(r.HT),c.Y36(r.Br),c.Y36(l.H),c.Y36(r.t4),c.Y36(f.eN))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-edit-profile"]],decls:44,vars:13,consts:[[1,"ion-no-border"],["color","primary"],["slot","start"],["text","Back","icon","caret-back",1,"app-navigation__back-button"],["slot","end"],["routerDirection","forward","color","secondary","fill","solid","shape","round",1,"app-navigation__settings-button",3,"routerLink"],["name","settings-outline","slot","start"],[1,"signup"],[1,"signup__form",3,"ngSubmit"],["lines","none",1,"edit-profile__form__avatar"],["name","person",4,"ngIf"],["item-start","",4,"ngIf"],["color","primary","shape","round",3,"click"],["enctype","multipart/form-data",2,"display","none"],["id","addPhotoMedia","type","file","accept","image/*",3,"change"],[1,"signup__form__input"],["type","text","name","name",3,"ngModel","ngModelChange"],["type","email","name","email",3,"ngModel","ngModelChange"],[1,"signup__form__input","signup__form__input--date"],["angular-mydatepicker","","name","dob","autoComplete","none","readonly","",3,"ngModel","options","click","ngModelChange"],["dp","angular-mydatepicker"],["type","text","name","location",3,"ngModel","ngModelChange"],["name","biography","autoGrow","true","maxlength","200","autocapitalize","on","spellcheck","on",3,"ngModel","ngModelChange"],["color","dark","expand","block","shape","round","type","submit",1,"signup__form__login-button",3,"disabled"],["color","light",4,"ngIf"],["class","signup__form__error",4,"ngIf"],["name","person"],["item-start",""],[3,"src"],["color","light"],[1,"signup__form__error"]],template:function(n,t){if(1&n){var o=c.EpF();c.TgZ(0,"ion-header",0),c.TgZ(1,"ion-toolbar",1),c.TgZ(2,"ion-buttons",2),c._UZ(3,"ion-back-button",3),c.qZA(),c.TgZ(4,"ion-title"),c._uU(5,"Edit Profile"),c.qZA(),c.TgZ(6,"ion-buttons",4),c.TgZ(7,"ion-button",5),c._UZ(8,"ion-icon",6),c._uU(9," Settings "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"ion-content",7),c.TgZ(11,"form",8),c.NdJ("ngSubmit",function(){return t.update()}),c.TgZ(12,"ion-item",9),c.YNc(13,m,1,0,"ion-icon",10),c.YNc(14,M,2,1,"ion-avatar",11),c.TgZ(15,"ion-button",12),c.NdJ("click",function(){return t.changeImage()}),c._uU(16,"Select Photo"),c.qZA(),c.TgZ(17,"form",13),c.TgZ(18,"input",14),c.NdJ("change",function(n){return t.uploadPhoto(n)}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(19,"div",15),c.TgZ(20,"h6"),c._uU(21,"Name"),c.qZA(),c.TgZ(22,"ion-input",16),c.NdJ("ngModelChange",function(n){return t.profile.name=n}),c.qZA(),c.qZA(),c.TgZ(23,"div",15),c.TgZ(24,"h6"),c._uU(25,"Email"),c.qZA(),c.TgZ(26,"ion-input",17),c.NdJ("ngModelChange",function(n){return t.profile.email=n}),c.qZA(),c.qZA(),c.TgZ(27,"div",18),c.TgZ(28,"h6"),c._uU(29,"Date of Birth"),c.qZA(),c.TgZ(30,"input",19,20),c.NdJ("click",function(){return c.CHM(o),c.MAs(31).toggleCalendar()})("ngModelChange",function(n){return t.profile.dob_raw=n}),c.qZA(),c.qZA(),c.TgZ(32,"div",15),c.TgZ(33,"h6"),c._uU(34,"Location"),c.qZA(),c.TgZ(35,"ion-input",21),c.NdJ("ngModelChange",function(n){return t.profile.location=n}),c.qZA(),c.qZA(),c.TgZ(36,"div",15),c.TgZ(37,"h6"),c._uU(38,"Brief Biography"),c.qZA(),c.TgZ(39,"ion-textarea",22),c.NdJ("ngModelChange",function(n){return t.profile.biography=n}),c.qZA(),c.qZA(),c.TgZ(40,"ion-button",23),c._uU(41," Update "),c.YNc(42,h,1,0,"ion-spinner",24),c.qZA(),c.YNc(43,C,2,1,"p",25),c.qZA(),c.qZA()}2&n&&(c.xp6(7),c.Q6J("routerLink",c.DdM(12,P)),c.xp6(6),c.Q6J("ngIf",!t.profile.avatar),c.xp6(1),c.Q6J("ngIf",t.profile.avatar),c.xp6(8),c.Q6J("ngModel",t.profile.name),c.xp6(4),c.Q6J("ngModel",t.profile.email),c.xp6(4),c.Q6J("ngModel",t.profile.dob_raw)("options",t.dateOptions),c.xp6(5),c.Q6J("ngModel",t.profile.location),c.xp6(4),c.Q6J("ngModel",t.profile.biography),c.xp6(1),c.Q6J("disabled",t.profile.loading||!t.profile.email),c.xp6(2),c.Q6J("ngIf",t.profile.loading),c.xp6(1),c.Q6J("ngIf",t.profile.error))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.YG,r.YI,a.rH,r.gu,r.W2,i._Y,i.JL,i.F,r.Ie,e.O5,r.pK,r.j9,i.JJ,i.On,i.Fj,_.w_,r.g2,i.nD,r.BJ,r.PQ],styles:[".app-navigation__back-button[_ngcontent-%COMP%]{font-size:13px;text-transform:none;background-color:#fff;border-radius:20px;overflow:hidden;--min-width:72px;color:#210f38;--icon-font-size:15px}.app-navigation__back-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#e7d2e6}.app-navigation__back-button.ios[_ngcontent-%COMP%]{--icon-margin-end:0px}.app-navigation__settings-button[_ngcontent-%COMP%]{--padding-start:13px;--padding-end:15px;font-size:14px;font-weight:500}.app-navigation__settings-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px;margin-inline-end:.2em}.edit-profile__form__avatar[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;--background:#0000}.edit-profile__form__avatar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:20px;height:20px;padding:10px;border-radius:20px;background-color:#210f38;color:#fff;margin-bottom:5px}.edit-profile__form__avatar[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{margin-bottom:5px}.edit-profile__form__avatar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-left:15px;--padding-start:20px;--padding-end:20px}.signup[_ngcontent-%COMP%]{--padding-top:30px;--padding-bottom:40px;--padding-start:20px;--padding-end:20px}.signup[_ngcontent-%COMP%]   .signup__header[_ngcontent-%COMP%]{padding-bottom:30px}.signup[_ngcontent-%COMP%]   .signup__header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;width:180px}.signup[_ngcontent-%COMP%]   .signup__header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:40px 0 0}.signup[_ngcontent-%COMP%]   .signup__header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:10px 0 0}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__input[_ngcontent-%COMP%]{margin-top:20px}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__input[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:200;font-size:14px;margin:0;padding-bottom:10px}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__input[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%], .signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], .signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__input[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--background:#fde8fa;background-color:#fde8fa;border-radius:64px;--padding-top:12.5px;--padding-bottom:12.5px;--padding-start:30px}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__input.signup__form__input--date[_ngcontent-%COMP%]{position:relative}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__input.signup__form__input--date[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:relative;border:none!important;box-shadow:none!important;outline:none!important;width:100%;background-color:#fde8fa;border-radius:64px;padding-top:12.5px;padding-bottom:12.5px;padding-left:30px;color:var(--color);font-family:var(--ion-font-family,inherit)}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__login-button[_ngcontent-%COMP%]{margin-top:25px}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__login-button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;margin-left:5px}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__error[_ngcontent-%COMP%]{text-align:center;color:red}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__secondary-actions[_ngcontent-%COMP%]{margin-top:25px}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__secondary-actions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px;font-weight:200;text-align:center}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__secondary-actions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#210f38}@media (prefers-color-scheme: dark){.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__input[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%], .signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], .signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__input[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%], .signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__input[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--background:#210f38;background-color:#210f38}.signup[_ngcontent-%COMP%]   .signup__form[_ngcontent-%COMP%]   .signup__form__input.signup__form__input--date[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#210f38}}"]}),n}()}],b=function(){function n(){}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[a.Bz.forChild(O)],a.Bz]}),n}(),x=function(){function n(){}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[e.ez,i.u5,r.Pc,b,_._7]]}),n}()}}]);